cmake_minimum_required(VERSION 3.16)
project(NeoCHIP-8 LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# include ë””ë ‰í† ë¦¬
include_directories(
    ${CMAKE_SOURCE_DIR}/include
    ${CMAKE_SOURCE_DIR}/include/core
    ${CMAKE_SOURCE_DIR}/include/platform
    ${CMAKE_SOURCE_DIR}/include/syscall
    ${CMAKE_SOURCE_DIR}/include/boot
    ${CMAKE_SOURCE_DIR}/include/common
    ${CMAKE_SOURCE_DIR}/include/debugger
)

# ğŸ”§ mode_selector.cppê°€ í•„ìš”ë¡œ í•˜ëŠ” ëª¨ë“  íŒŒì¼ë“¤ ì¶”ê°€
set(SRC_FILES
    src/core/chip8.cpp                      # âœ… 8ë¹„íŠ¸ CHIP-8 (mode_selectorì—ì„œ ì‚¬ìš©)
    src/core/chip8_32.cpp                   # âœ… 32ë¹„íŠ¸ CHIP-8
    src/core/opcode_table.cpp               # âœ… 8ë¹„íŠ¸ opcode í…Œì´ë¸” (mode_selectorì—ì„œ ì‚¬ìš©)
    src/core/opcode_table_32.cpp            # âœ… 32ë¹„íŠ¸ opcode í…Œì´ë¸”
    src/core/mode_selector.cpp              # âœ… ëª¨ë“œ ì„ íƒê¸°
    src/boot/boot_rom.cpp
    src/boot/boot_rom_data.cpp
    src/syscall/io_manager.cpp
    src/syscall/sdl_console_io.cpp
    src/platform/platform.cpp
    src/platform/timer.cpp                  # âœ… timer í•¨ìˆ˜ë“¤ (mode_selectorì—ì„œ ì‚¬ìš©)
    src/debugger/debugger.cpp               # âœ… ë””ë²„ê±° (mode_selectorì—ì„œ ì‚¬ìš©)
    src/main.cpp
)

# pkg-configë¡œ SDL2/SDL2_ttf ê²€ìƒ‰
find_package(PkgConfig REQUIRED)
pkg_check_modules(SDL2 REQUIRED sdl2)
pkg_check_modules(SDL2_TTF REQUIRED SDL2_ttf)

# include ê²½ë¡œ ì¶”ê°€
include_directories(${SDL2_INCLUDE_DIRS} ${SDL2_TTF_INCLUDE_DIRS})

# ì‹¤í–‰ íŒŒì¼ ìƒì„±
add_executable(chip8_dual ${SRC_FILES})

# ë¼ì´ë¸ŒëŸ¬ë¦¬ ë§í¬
target_link_libraries(chip8_dual ${SDL2_LIBRARIES} ${SDL2_TTF_LIBRARIES})

# ğŸ”§ ì¶”ê°€: ì»´íŒŒì¼ ì˜µì…˜
target_compile_options(chip8_dual PRIVATE -Wall -Wextra)